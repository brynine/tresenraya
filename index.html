<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tres en Raya</title>
    <link rel="stylesheet" type="text/css" href="./css/styles.css" />
    <link rel="icon" href="data:," />
  </head>

  <body>
    <nav class="navbar">
      <h1 class="titulo">TRES EN RAYA</h1>
      <div class="nav-buttons">
        <button id="btnJuego" class="nav-btn active">Juego</button>
        <button id="btnHistorial" class="nav-btn">Historial</button>
      </div>
    </nav>

    <main class="container">
      <section id="seccionJuego" class="seccion visible">
        <div class="game-container">
          <h2>Registro de Jugadores</h2>
          <form id="setup-form" class="setup">
            <div>
              <label for="player1">Jugador 1 (X):</label>
              <input
                type="text"
                id="player1"
                placeholder="Nombre del jugador 1"
              />
            </div>

            <div>
              <label for="player2">Jugador 2 (O):</label>
              <input
                type="text"
                id="player2"
                placeholder="Nombre del jugador 2"
              />
            </div>

            <fieldset>
              <legend>¿Quién empieza?</legend>
              <div class="start-options">
                <div class="radio-group">
                  <label>
                    <input type="radio" name="first" value="X" checked /> X
                  </label>
                  <label>
                    <input type="radio" name="first" value="O" /> O
                  </label>
                </div>
                <button type="submit" class="btn_iniciar">
                  Iniciar Partida
                </button>
              </div>
            </fieldset>
          </form>

          <section class="game">
            <h3>Tablero de juego</h3>
            <div id="status" class="status">Esperando partida...</div>
            <div id="board" class="board"></div>

            <div class="info">
              <p>Movimientos: <span id="move-count">0</span></p>
              <p>Tiempo: <span id="timer">00:00</span></p>
            </div>

            <div class="controls">
              <button id="rematch-btn">Revancha</button>
              <button id="newgame-btn">Nueva Partida</button>
            </div>
          </section>
        </div>
      </section>

      <section id="seccionHistorial" class="seccion oculto">
        <div class="game-container">
          <h2>Historial de Partidas</h2>

          <div class="history-controls">
            <button id="export-json">Exportar JSON</button>
            <button id="clear-history">Borrar Historial</button>
          </div>

          <table id="history-table">
            <thead>
              <tr>
                <th>Jugadores</th>
                <th>Ganador</th>
                <th>Movimientos</th>
                <th>Duración</th>
                <th>Fecha</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>
    </main>

    <script type="module" src="./js/game.js"></script>

    <script>
      const btnJuego = document.getElementById("btnJuego");
      const btnHistorial = document.getElementById("btnHistorial");
      const seccionJuego = document.getElementById("seccionJuego");
      const seccionHistorial = document.getElementById("seccionHistorial");

      btnJuego.addEventListener("click", () => {
        seccionJuego.classList.add("visible");
        seccionHistorial.classList.remove("visible");
        btnJuego.classList.add("active");
        btnHistorial.classList.remove("active");
      });

      btnHistorial.addEventListener("click", () => {
        seccionJuego.classList.remove("visible");
        seccionHistorial.classList.add("visible");
        btnJuego.classList.remove("active");
        btnHistorial.classList.add("active");
      });
    </script>

    <div id="customModal" class="modal">
      <div class="modal-content">
        <p id="modalMessage"></p>
        <button id="closeModal">Aceptar</button>
      </div>
    </div>
  </body>
</html>
